<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Angular 강좌(9) - Service & RxJS</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous">
    </script>

    <!-- 웹 폰트 설정 -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">

    <!-- Font Awesome 설정 -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- custom.css -->
    <link rel="stylesheet" href="/assets/built/custom.css">

    <!-- syntax.css -->
    <link rel="stylesheet" href="/assets/built/syntax.css">

    <!-- gist.css -->
    <link rel="stylesheet" href="/assets/built/better-gist-styles.css">

    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Development & Technical Training" />
    <link rel="shortcut icon" href="https://moon9342.github.io/assets/built/images/favicon.jpg" type="image/png" />
    <link rel="canonical" href="https://moon9342.github.io/angular-lecture-service" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="IT Blog" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Angular 강좌(9) - Service & RxJS" />
    <meta property="og:description" content="Angular 강좌는 여러 절로 구성되어 있습니다. Angular 강좌(1) - Introduction Angular 강좌(2) - 개발환경세팅 Angular 강좌(3) - Component Angular 강좌(4) - Angular Material Angular 강좌(5) - 실습(1) Angular 강좌(6) - Data Binding Angular 강좌(7) - 실습(2) Angular 강좌(8) - Material Table Angular 강좌(9) - Service &amp; RxJS bookSearch 프로그램 완성" />
    <meta property="og:url" content="https://moon9342.github.io/angular-lecture-service" />
    <meta property="og:image" content="https://moon9342.github.io/assets/built/images/angular-logo.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2018-02-07T15:45:00+00:00" />
    <meta property="article:modified_time" content="2018-02-07T15:45:00+00:00" />
    <meta property="article:tag" content="Front End" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Angular 강좌(9) - Service & RxJS" />
    <meta name="twitter:description" content="Angular 강좌는 여러 절로 구성되어 있습니다. Angular 강좌(1) - Introduction Angular 강좌(2) - 개발환경세팅 Angular 강좌(3) - Component Angular 강좌(4) - Angular Material Angular 강좌(5) - 실습(1) Angular 강좌(6) - Data Binding Angular 강좌(7) - 실습(2) Angular 강좌(8) - Material Table Angular 강좌(9) - Service &amp; RxJS bookSearch 프로그램 완성" />
    <meta name="twitter:url" content="https://moon9342.github.io/" />
    <meta name="twitter:image" content="https://moon9342.github.io/assets/built/images/angular-logo.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="IT Blog" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Front End" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "IT Blog",
        "logo": "https://moon9342.github.io/"
    },
    "url": "https://moon9342.github.io/angular-lecture-service",
    "image": {
        "@type": "ImageObject",
        "url": "https://moon9342.github.io/assets/built/images/angular-logo.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://moon9342.github.io/angular-lecture-service"
    },
    "description": "Angular 강좌는 여러 절로 구성되어 있습니다. Angular 강좌(1) - Introduction Angular 강좌(2) - 개발환경세팅 Angular 강좌(3) - Component Angular 강좌(4) - Angular Material Angular 강좌(5) - 실습(1) Angular 강좌(6) - Data Binding Angular 강좌(7) - 실습(2) Angular 강좌(8) - Material Table Angular 강좌(9) - Service &amp; RxJS bookSearch 프로그램 완성"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <!-- 사용자 browser 확인 코드 - Chrome이 아니면 경고 메시지 출력 -->

    <script>
        var agent = navigator.userAgent.toLowerCase();
        var _iPhone = false;
        var _chrome = false;
        var result = false;
        if (agent.indexOf("iphone") != -1) {
            _iPhone = true;
        }
        if (agent.indexOf("chrome") != -1) {
            _chrome = true;
        }

        if( _iPhone || _chrome ) {
            result = true;
        }

        if( !result ) {
            alert("이 블로그는 Google Chrome Browser에 최적화 되어 있습니다 !!");
        }

    </script>

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Angular 강좌(9) - Service & RxJS" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://moon9342.github.io">IT Blog</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-back-end" role="menuitem"><a href="/tag/back-end/">Back End</a></li>
    <li class="nav-front-end" role="menuitem"><a href="/tag/front-end/">Front End</a></li>
    <li class="nav-miscellaneous-article" role="menuitem"><a href="/tag/miscellaneous-article/">Miscellaneous Article</a></li>
    <li class="nav-archive" role="menuitem"><a href="/archive.html">Archive</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Search</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-front-end ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 7 February 2018"> 7 February 2018</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/front-end/'>FRONT END</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Angular 강좌(9) - Service & RxJS</h1>
            </header>

            
<!--
            post에 cover image를 표시하지 않게 설정
            <figure class="post-full-image" style="background-image: url(/assets/built/images/angular-logo.png)">
            </figure>
-->
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p><span class="table-of-contents-list">Angular 강좌는 여러 절로 구성되어 있습니다. </span></p>
<ul class="table-of-contents-list">
    <li><a href="./angular-lecture-introduction">Angular 강좌(1) - Introduction</a></li>
    <li><a href="./angular-lecture-development-environment">Angular 강좌(2) - 개발환경세팅</a></li>
    <li><a href="./angular-lecture-component">Angular 강좌(3) - Component</a></li>
    <li><a href="./angular-lecture-material">Angular 강좌(4) - Angular Material</a></li>
    <li><a href="./angular-lecture-exercise-1">Angular 강좌(5) - 실습(1)</a></li>
    <li><a href="./angular-lecture-databinding">Angular 강좌(6) - Data Binding</a></li>
    <li><a href="./angular-lecture-exercise-2">Angular 강좌(7) - 실습(2)</a></li>
    <li><a href="./angular-lecture-material-table">Angular 강좌(8) - Material Table</a></li>
    <li><a href="./angular-lecture-service">Angular 강좌(9) - Service &amp; RxJS</a></li>
</ul>

<hr />

<p><strong><i class="fa fa-bolt" style="color:#01077c"></i> bookSearch 프로그램 완성</strong></p>

<p>이번 포스트는 Component 간의 데이터 공유에 대해서 알아보고 그 내용을 기반으로 우리 Sample 프로그램을
완성하도록 하겠습니다. 결과적으로 작성한 프로그램은 <a href="./angular-bookSearch/" target="_blank">여기</a>를 
클릭하시면 실행시켜 보실 수 있습니다.</p>

<p>실행시켜 보시면 이전에 비해 두가지 기능이 추가되었습니다.</p>

<ul>
  <li>키워드 입력 후 Search버튼을 클릭하면 해당 키워드에 대한 책만 list-box에 출력됩니다.</li>
  <li>list-box에 출력된 책 중 하나를 선택하면 해당 책에 대한 세부내역을 detail-box에 출력합니다.</li>
</ul>

<p>이 두가지 기능을 <code class="highlighter-rouge">Service</code>와 <code class="highlighter-rouge">RxJS</code>를 이용하여 처리해 보겠습니다. Service의 사용과 RxJS를 처리하는 부분은 
일단 코드상으로 어떤 기능을 하는지 알아두시고 개념적인 설명은 나중에 다른 포스트에서 진행하도록 하겠습니다.</p>

<p>그럼 천천히 한번 살펴보기로 하죠.</p>

<hr />

<p><strong><i class="fa fa-bolt" style="color:#01077c"></i> Service를 이용한 데이터 공유</strong></p>

<p>Component간 데이터를 공유하는 방법은 사실 여러가지가 있습니다. 여기서는 그 중 <code class="highlighter-rouge">Service</code>를 이용한 데이터 공유에 대해서
알아보려 합니다. 사실 Service는 데이터를 공유하는 목적보다는 Component들이 수행하는 공통 로직을 제공하는데 그 목적이
있습니다. 전통적인 MVC pattern에서의 그 Service 생각하시면 됩니다.</p>

<p>공유 데이터를 Service에 위치시키고 여러 Component에서 해당 Service를 import해서 
데이터를 공유하는 방식입니다.</p>

<p>예를 들자면, Service에 list-box에서 선택한 책에 대한 정보를 저장해 놓고 그 정보를 detail-box에서 가져다가 사용하는
방식입니다.</p>

<p><img src="assets/built/images/bookSearch-service.jpg" alt="bookSearch-service" /></p>

<p>그림으로 보자면 위와 같습니다. 이와 같이 Service에 공유 데이터를 위치시키고 각각의 Component에서 해당 데이터를 가져다가
사용하는 방식은 상당히 쉬우나 아쉽게도 우리의 경우는 약간 다릅니다.</p>

<blockquote>
  <p>우리의 경우는 list-box에서 책을 선택하면 책의 정보가 Service에 저장되는 것 까지는 같으나 detail-box에서 수동으로 
데이터를 가져가는것이 아니라 데이터가 변경된것을 인지해서 자동으로 데이터를 가져가 화면을 갱신해야 합니다. 이 부분에 RxJS가
사용됩니다.</p>
</blockquote>

<p>먼저 Service를 하나 생성합니다. 나중에 다시 배우겠지만 해당 Service를 3개의 Component들이 모두 사용해야 하기 때문에 
AppModule에 등록해서 사용할 것입니다. 만드는 위치는 <code class="highlighter-rouge">src/app</code> 폴더 하단에서 만들고 다음의 명령을 이용합니다.</p>

<blockquote>
  <p><strong>ng generate service selected-book</strong></p>
</blockquote>

<p><code class="highlighter-rouge">selected-book</code>이란 이름의 service를 하나 생성했습니다. <code class="highlighter-rouge">src/app</code> 폴더 하단에 <code class="highlighter-rouge">selected-book.service.ts</code> 파일이 생성됩니다. 
해당 파일의 내용을 다음과 같이 수정합니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BehaviorSubject</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'rxjs/BehaviorSubject'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">SeletedBookService</span> <span class="p">{</span>

  <span class="c1">// 공유되는 데이터</span>
  <span class="nx">selectedBook</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">bauthor</span><span class="p">:</span> <span class="s1">'에릭 프리먼외 3명'</span><span class="p">,</span>
    <span class="na">bdate</span><span class="p">:</span> <span class="s1">'2005년 08월'</span><span class="p">,</span>
    <span class="na">btranslator</span><span class="p">:</span> <span class="s1">'홍길동'</span><span class="p">,</span>
    <span class="na">bpublisher</span><span class="p">:</span> <span class="s1">'한빛미디어(주)'</span><span class="p">,</span>
    <span class="na">btitle</span><span class="p">:</span> <span class="s1">'Head First Design Patterns: 스토리가 있는 패턴 학습법'</span><span class="p">,</span>
    <span class="na">bprice</span><span class="p">:</span> <span class="mi">28000</span><span class="p">,</span>
    <span class="na">bisbn</span><span class="p">:</span> <span class="s1">'89-7914-340-0'</span><span class="p">,</span>
    <span class="na">bimgurl</span><span class="p">:</span> <span class="s1">'http://image.hanbit.co.kr/cover/_m_1340m.gif'</span>
  <span class="p">};</span>

  <span class="c1">// RxJS를 이용하기 위한 객체 생성.</span>
  <span class="c1">// 나중에 updateBookStatus.next()를 이용하여 </span>
  <span class="c1">// 공유 데이터를 변경시킬 수 있고 이를 구독하고 있는 측에서</span>
  <span class="c1">// 변경사실을 인지해 자동 갱신을 할 수 있습니다. </span>
  <span class="nl">updateBookStatus</span><span class="p">:</span> <span class="nx">BehaviorSubject</span><span class="o">&lt;</span><span class="nx">Element</span><span class="o">&gt;</span> <span class="o">=</span> 
        <span class="k">new</span> <span class="nx">BehaviorSubject</span><span class="o">&lt;</span><span class="nx">Element</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selectedBook</span><span class="p">);</span>

  <span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Element</span> <span class="p">{</span>
  <span class="nl">bauthor</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bdate</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">btranslator</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bpublisher</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">btitle</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bprice</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nl">bisbn</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bimgurl</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>위와 같이 Service를 생성하고 <code class="highlighter-rouge">app.module.ts</code>에 등록합니다. Service이기 때문에 providers에 지정해줘야 합니다. 다음은
<code class="highlighter-rouge">app.module.ts</code> 파일의 일부입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 각종 import 구문들</span>

<span class="c1">// selected-book service import</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">SeletedBookService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./seleted-book.service'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">...</span>
  <span class="p">],</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">...</span>
  <span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[{</span>
    <span class="na">provide</span><span class="p">:</span> <span class="nx">COMPOSITION_BUFFER_MODE</span><span class="p">,</span>
    <span class="na">useValue</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">},</span> <span class="nx">SeletedBookService</span><span class="p">],</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre></div></div>

<p>다음은 list-box Component를 살펴볼 차례입니다. Material Table에서 row를 클릭했을 때 event를 처리하기 위해
<code class="highlighter-rouge">list-box.component.html</code>을 다음과 같이 수정합니다.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;mat-header-row</span> <span class="na">class=</span><span class="s">"list-header-style"</span>
                    <span class="err">*</span><span class="na">matHeaderRowDef=</span><span class="s">"displayedColumns"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/mat-header-row&gt;</span>
    <span class="nt">&lt;mat-row</span> <span class="err">*</span><span class="na">matRowDef=</span><span class="s">"let row; columns: displayedColumns;"</span>
             <span class="err">(</span><span class="na">click</span><span class="err">)="</span><span class="na">rowSelect</span><span class="err">(</span><span class="na">row</span><span class="err">)"</span><span class="nt">&gt;&lt;/mat-row&gt;</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">rowSelector()</code>라는 event handler를 사용했습니다. 해당 method는 <code class="highlighter-rouge">list-box.component.ts</code>에 정의되어 있습니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">MatTableDataSource</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/material'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Http</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/http'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">MatPaginator</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/material'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ViewChild</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="c1">// Service를 사용하기 위해 import</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">SeletedBookService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../seleted-book.service'</span><span class="p">;</span>
<span class="c1">// Material Table의 row select 이벤트 처리용</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">SelectionModel</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/cdk/collections'</span><span class="p">;</span>

<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-list-box'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./list-box.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./list-box.component.css'</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ListBoxComponent</span> <span class="p">{</span>

  <span class="nx">displayedColumns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'bisbn'</span><span class="p">,</span> <span class="s1">'btitle'</span><span class="p">,</span> <span class="s1">'bauthor'</span><span class="p">,</span> <span class="s1">'bprice'</span><span class="p">];</span>
  <span class="nl">books</span><span class="p">:</span> <span class="nx">Element</span><span class="p">[];</span>
  <span class="nx">dataSource</span><span class="p">;</span>
  
  <span class="c1">// event 모델 지정</span>
  <span class="nx">selection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SelectionModel</span><span class="o">&lt;</span><span class="nx">Element</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="p">[]);</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">http</span><span class="p">:</span> <span class="nx">Http</span><span class="p">,</span> <span class="kr">private</span> <span class="nx">selectedBookService</span><span class="p">:</span> <span class="nx">SeletedBookService</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s1">'assets/data/book.json'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">books</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dataSource</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MatTableDataSource</span><span class="o">&lt;</span><span class="nx">Element</span><span class="o">&gt;</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">books</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dataSource</span><span class="p">.</span><span class="nx">paginator</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">paginator</span><span class="p">;</span>
      <span class="p">});</span>
  <span class="p">}</span>

  <span class="p">@</span><span class="nd">ViewChild</span><span class="p">(</span><span class="nx">MatPaginator</span><span class="p">)</span> <span class="na">paginator</span><span class="p">:</span> <span class="nx">MatPaginator</span><span class="p">;</span>

  <span class="c1">// 실제 이벤트 처리 ( 이벤트 모델에 데이터 세팅 및 Service의 공유 데이터 갱신 )</span>
  <span class="nx">rowSelect</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">selectedBookService</span><span class="p">.</span><span class="nx">updateBookStatus</span><span class="p">.</span><span class="nx">next</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">selected</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kr">interface</span> <span class="nx">Element</span> <span class="p">{</span>
  <span class="na">bauthor</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bdate</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">btranslator</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bpublisher</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">btitle</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bprice</span><span class="p">:</span> <span class="nx">number</span><span class="p">;</span>
  <span class="nl">bisbn</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
  <span class="nl">bimgurl</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>코드에 있는 주석을 참조하시면 될 듯 합니다. Table에 있는 행을 클릭하면 공유데이터가 변경되고 이를 구독하고 있는 detail-box
Component가 변경을 인지하여 자동으로 갱신하게 됩니다.</p>

<p>다음은 <code class="highlighter-rouge">detail-box.component.ts</code> 파일 입니다.</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="c1">// Service import</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">SeletedBookService</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'../seleted-book.service'</span><span class="p">;</span>


<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'app-detail-box'</span><span class="p">,</span>
  <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'./detail-box.component.html'</span><span class="p">,</span>
  <span class="na">styleUrls</span><span class="p">:</span> <span class="p">[</span><span class="s1">'./detail-box.component.css'</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">DetailBoxComponent</span> <span class="kr">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="nx">book</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">selectedBookService</span><span class="p">:</span> <span class="nx">SeletedBookService</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">selectedBookService</span><span class="p">.</span><span class="nx">updateBookStatus</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">selectedBook</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">book</span> <span class="o">=</span> <span class="nx">selectedBook</span><span class="p">;</span>
    <span class="p">});</span>

  <span class="p">}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<p>실제 변경되는 코드가 몇 줄 되지 않으니 그 부분을 참고해서 서비스의 활용 및 RxJS를 어떻게 이용하는지 
살펴보시면 됩니다.</p>

<p>이제 keyword를 입력하고 버튼을 클릭하면 Table의 내용을 Filtering하는 작업을 해 보시면 됩니다. 위의 코드를
잘 이해해 보시고 그 내용을 기반으로 데이터 검색 기능은 스스로 작성해 보세요!!</p>

<p>여기까지가 Angular의 기본 구성을 알아보기 위한 Sample Project 작성입니다. 비록 자세한 설명이 생략되었고 아직 살펴보지
못한 다른 구성요소들이 많지만 일단 Angular의 기본 구성요소들이 어떻게 상호작용하면서 동작하는지는 개략적으로
이해하실수 있으리라 생각됩니다.</p>

<p>End.</p>

<hr />

<p><span class="lecture-reference">Angular 강좌는 아래의 책과 사이트를 참조했습니다.
    조금 더 자세한 사항을 알고 싶으시면 해당 사이트를 방문하세요!!</span></p>
<ul class="lecture-reference">
    <li><a href="https://angular.io/" target="_blank">Angular Official HomePage</a></li>
    <li><a href="https://material.angular.io/" target="_blank">Angular Material Official HomePage</a></li>
    <li><a href="https://scotch.io/tutorials/build-a-mobile-app-with-angular-2-and-ionic-2" target="_blank">Build a Mobile App with Angular 2 and Ionic 2</a></li>
    <li>Angular 첫걸음 - 한빛미디어</li>
    <li>제대로 배우는 Angular 4 - 비제이퍼블릭</li>
</ul>


                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            <!-- 기존에 있던 post하단 이메일 subscribe 삭제 -->

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                
                    
                
                    
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/built/images/angular-author-logo.png" alt="angular" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/angular">Angular</a></h4>
                                
                                    <p>Angular Framework 관련 Posts</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/angular">Read More</a>
                        </div>
                    
                
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            this.page.url = 'https://moon9342.github.io/angular-lecture-service';
                            this.page.identifier = '/angular-lecture-service';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = '//sunghoons-blog.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/blog-cover.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; IT Blog &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/front-end/">Front end</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/angular-lecture-material-table">Angular 강좌(8) - Material Table</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/angular-lecture-exercise-2">Angular 강좌(7) - 실습(2)</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/angular-lecture-databinding">Angular 강좌(6) - Data Binding</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/front-end/">
                                
                                    See all 19 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/angular-lecture-material-table">
                <div class="post-card-image" style="background-image: url(/assets/built/images/angular-logo.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/angular-lecture-material-table">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Front end</span>
                            
                        
                    

                    <h2 class="post-card-title">Angular 강좌(8) - Material Table</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>Angular 강좌는 여러 절로 구성되어 있습니다. Angular 강좌(1) - Introduction Angular 강좌(2) - 개발환경세팅 Angular 강좌(3) - Component Angular 강좌(4) - Angular Material Angular 강좌(5) - 실습(1) Angular 강좌(6) - Data Binding Angular</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/angular-author-logo.png" alt="Angular" />
                        
                        <span class="post-card-author">
                            <a href="/author/angular/">Angular</a>
                        </span>
                    
                
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://moon9342.github.io/">
            
            <span>IT Blog</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Angular 강좌(9) - Service & RxJS</div>



    <div class="floating-header-share">
        <div class="floating-header-share-label">이 포스트를 공유하세요 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Angular+%EA%B0%95%EC%A2%8C%289%29+-+Service+%26+RxJS&amp;url=https://moon9342.github.io/angular-lecture-service"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://moon9342.github.io/angular-lecture-service"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>


    <!-- floating-header에 이미지 삽입 -->
<!--
    <div class="floating-header-share">
        <img src="assets/images/photo.jpg" width="50">
    </div>
-->

    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->

        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://moon9342.github.io/">IT Blog</a> &copy; 2018</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/">GitHub Pages</a></section>
                <nav class="site-footer-nav">
                    <a href="mailto:moon9342@gmail.com">moon9342@gmail.com</a>
                    <a href="/">Latest Posts</a>
                    
                    
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                <h1 class="subscribe-overlay-title">Search IT Blog</h1>
                <p class="subscribe-overlay-description">lunr.js를 이용한 posts 검색 </p>
                <span id="searchform" method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" onkeyup="myFunc()" id="searchtext" type="text" name="searchtext"  placeholder="Search..." />
    </div>
    <!--<button class="" onclick="myFunc()" id="searchBtn" type="button" ><span>Search</span></button>-->
    <script type="text/javascript">
        function myFunc() {
            if(event.keyCode == 13) {
                var url = encodeURIComponent($("#searchtext").val());
                location.href = "/search.html?query=" + url;
            }
        }
    </script>
    <!--<script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>-->
</span>


            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113135179-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
